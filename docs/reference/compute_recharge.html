<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Performs a simulation of water recharge using a specific model.
HydroBudget is a spatially distributed GWR model that computes a superficial water budget on
grid cells of regional-scale watersheds. Runoff, actual evapotranspiration (AET), and potential
GWR are simulated for each grid cell, with a monthly time step, and fluxes do not
transfer from a cell to another (no water routing). The model inputs are distributed daily
precipitation and temperature as well as distributed data of pedology, land cover, and slope."><title>Simulation using a recharge model — compute_recharge • rechaRge</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulation using a recharge model — compute_recharge"><meta property="og:description" content="Performs a simulation of water recharge using a specific model.
HydroBudget is a spatially distributed GWR model that computes a superficial water budget on
grid cells of regional-scale watersheds. Runoff, actual evapotranspiration (AET), and potential
GWR are simulated for each grid cell, with a monthly time step, and fluxes do not
transfer from a cell to another (no water routing). The model inputs are distributed daily
precipitation and temperature as well as distributed data of pedology, land cover, and slope."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rechaRge</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gwrecharge/rechaRge/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Simulation using a recharge model</h1>
      <small class="dont-index">Source: <a href="https://github.com/gwrecharge/rechaRge/blob/HEAD/R/core.R" class="external-link"><code>R/core.R</code></a>, <a href="https://github.com/gwrecharge/rechaRge/blob/HEAD/R/hydrobudget-simulation.R" class="external-link"><code>R/hydrobudget-simulation.R</code></a></small>
      <div class="d-none name"><code>compute_recharge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs a simulation of water recharge using a specific model.</p>
<p>HydroBudget is a spatially distributed GWR model that computes a superficial water budget on
grid cells of regional-scale watersheds. Runoff, actual evapotranspiration (AET), and potential
GWR are simulated for each grid cell, with a monthly time step, and fluxes do not
transfer from a cell to another (no water routing). The model inputs are distributed daily
precipitation and temperature as well as distributed data of pedology, land cover, and slope.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compute_recharge</span><span class="op">(</span></span>
<span>  <span class="va">obj</span>,</span>
<span>  <span class="va">rcn</span>,</span>
<span>  <span class="va">climate</span>,</span>
<span>  <span class="va">rcn_climate</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">compute_recharge</span><span class="op">(</span></span>
<span>  <span class="va">obj</span>,</span>
<span>  <span class="va">rcn</span>,</span>
<span>  <span class="va">climate</span>,</span>
<span>  <span class="va">rcn_climate</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for hydrobudget</span></span>
<span><span class="fu">compute_recharge</span><span class="op">(</span></span>
<span>  <span class="va">obj</span>,</span>
<span>  <span class="va">rcn</span>,</span>
<span>  <span class="va">climate</span>,</span>
<span>  <span class="va">rcn_climate</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>obj</dt>
<dd><p>The recharge object.</p></dd>


<dt>rcn</dt>
<dd><p>The RCN values. Input can be a data.frame/data.table or a path to a data file.</p></dd>


<dt>climate</dt>
<dd><p>The daily total precipitation (mm/d) and average daily temperature (°C). Input can be a data.frame/data.table or a path to a data file.</p></dd>


<dt>rcn_climate</dt>
<dd><p>The relation between the RCN and climate cells. Input can be a data.frame/data.table or a path to a data file.</p></dd>


<dt>period</dt>
<dd><p>The start and end years. If not provided, the start/end years will be extracted from the climate data.</p></dd>


<dt>workers</dt>
<dd><p>The number of workers to use in the parallel computations. If NULL, an optimal number of cores will be used. This optimal number is also the maximum value. Default value is 1 (no parallelization).</p></dd>


<dt>...</dt>
<dd><p>Other arguments passed to methods</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The water budget</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The expected columns for the RCN data set input are:</p><ul><li><p><strong>rcn_id</strong>, the RCN cell ID</p></li>
<li><p><strong>RCNII</strong></p></li>
<li><p><strong>lon</strong></p></li>
<li><p><strong>lat</strong></p></li>
</ul><p>The expected columns for the climate data set input are:</p><ul><li><p><strong>climate_id</strong> the climate cell ID</p></li>
<li><p><strong>day</strong></p></li>
<li><p><strong>month</strong></p></li>
<li><p><strong>year</strong></p></li>
<li><p><strong>t_mean</strong></p></li>
<li><p><strong>p_tot</strong></p></li>
<li><p><strong>lat</strong></p></li>
</ul><p>The expected columns for the RCN-climate data set input are:</p><ul><li><p><strong>climate_id</strong> the climate cell ID</p></li>
<li><p><strong>rcn_id</strong>, the RCN cell ID</p></li>
</ul><p>The columns of the water budget data set output are:</p><ul><li><p><strong>year</strong></p></li>
<li><p><strong>month</strong></p></li>
<li><p><strong>vi</strong></p></li>
<li><p><strong>t_mean</strong></p></li>
<li><p><strong>runoff</strong></p></li>
<li><p><strong>pet</strong></p></li>
<li><p><strong>aet</strong></p></li>
<li><p><strong>gwr</strong></p></li>
<li><p><strong>runoff_2</strong></p></li>
<li><p><strong>delta_reservoir</strong></p></li>
<li><p><strong>rcn_id</strong></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Use input example files provided by the package</span></span></span>
<span class="r-in"><span><span class="va">base_url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/gwrecharge/rechaRge-book/raw/main/examples/input/"</span></span></span>
<span class="r-in"><span><span class="va">input_rcn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"rcn.csv.gz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_climate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"climate.csv.gz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_rcn_climate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"rcn_climate.csv.gz"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calibration parameters</span></span></span>
<span class="r-in"><span><span class="va">HB</span> <span class="op">&lt;-</span> <span class="fu">rechaRge</span><span class="fu">::</span><span class="fu"><a href="new_hydrobudget.html">new_hydrobudget</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  T_m <span class="op">=</span> <span class="fl">2.1</span>, <span class="co"># melting temperature (°C)</span></span></span>
<span class="r-in"><span>  C_m <span class="op">=</span> <span class="fl">6.2</span>, <span class="co"># melting coefficient (mm/°C/d)</span></span></span>
<span class="r-in"><span>  TT_F <span class="op">=</span> <span class="op">-</span><span class="fl">17.6</span>, <span class="co"># Threshold temperature for soil frost (°C)</span></span></span>
<span class="r-in"><span>  F_T <span class="op">=</span> <span class="fl">16.4</span>, <span class="co"># Freezing time (d)</span></span></span>
<span class="r-in"><span>  t_API <span class="op">=</span> <span class="fl">3.9</span>, <span class="co"># Antecedent precipitation index time (d)</span></span></span>
<span class="r-in"><span>  f_runoff <span class="op">=</span> <span class="fl">0.63</span>, <span class="co"># Runoff factor (-)</span></span></span>
<span class="r-in"><span>  sw_m <span class="op">=</span> <span class="fl">431</span>, <span class="co"># Maximum soil water content (mm)</span></span></span>
<span class="r-in"><span>  f_inf <span class="op">=</span> <span class="fl">0.07</span> <span class="co"># infiltration factor (-)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulation period</span></span></span>
<span class="r-in"><span><span class="va">simul_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">2017</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parallel computing option</span></span></span>
<span class="r-in"><span><span class="co"># workers &lt;- 6</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulation with the HydroBudget model</span></span></span>
<span class="r-in"><span><span class="va">water_budget</span> <span class="op">&lt;-</span> <span class="fu">rechaRge</span><span class="fu">::</span><span class="fu">compute_recharge</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">HB</span>,</span></span>
<span class="r-in"><span>  rcn <span class="op">=</span> <span class="va">input_rcn</span>,</span></span>
<span class="r-in"><span>  climate <span class="op">=</span> <span class="va">input_climate</span>,</span></span>
<span class="r-in"><span>  rcn_climate <span class="op">=</span> <span class="va">input_rcn_climate</span>,</span></span>
<span class="r-in"><span>  period <span class="op">=</span> <span class="va">simul_period</span></span></span>
<span class="r-in"><span>  <span class="co"># workers = workers</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">water_budget</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yannick Marcon, Emmanuel Dubois.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

